<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ | CLEANPRO</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="cabinet.css">
</head>
<body class="cabinet-body">

<div class="dashboard-wrapper">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
        <h2>CLEAN<span>PRO</span></h2>

        <nav>
            <a href="dashboard.html">üè† –ö–∞–±—ñ–Ω–µ—Ç</a>
            <a href="orders.html">üßæ –ú–æ—ó –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è</a>
            <a href="referrals.html" class="active">ü§ù –†–µ—Ñ–µ—Ä–∞–ª–∏</a>
            <a href="../index.html">üåç –ù–∞ —Å–∞–π—Ç</a>
            <a href="#" onclick="logout()">üö™ –í–∏–π—Ç–∏</a>
        </nav>
    </aside>

    <!-- ===== MAIN ===== -->
    <main class="dashboard-main">

        <h1>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞</h1>
        <p class="subtitle">–ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–≥–∞ ‚Äî –æ—Ç—Ä–∏–º–∞–π <strong>30% –∑–Ω–∏–∂–∫–∏</strong></p>

        <!-- REF LINK -->
        <div class="info-box">
            <h2>–í–∞—à–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</h2>

            <div class="ref-link">
                <input type="text" id="refLink" readonly>
                <button class="btn" onclick="copyRef()">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            </div>

            <p class="small">
                –ü–æ–¥—ñ–ª–∏—Å—å —Ü–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –∑ –¥—Ä—É–∑—è–º–∏.  
                –ö–æ–ª–∏ –¥—Ä—É–≥ –∑–∞–º–æ–≤–∏—Ç—å –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è ‚Äî —Ç–∏ –æ—Ç—Ä–∏–º–∞—î—à –∑–Ω–∏–∂–∫—É.
            </p>
        </div>

        <!-- STATS -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="refCount">0</h3>
                <p>–ó–∞–ø—Ä–æ—à–µ–Ω–∏—Ö</p>
            </div>

            <div class="stat-card">
                <h3>30%</h3>
                <p>–ó–Ω–∏–∂–∫–∞</p>
            </div>
        </div>

        <!-- INFO -->
        <div class="info-box">
            <h2>–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?</h2>
            <ul>
                <li>1Ô∏è‚É£ –ù–∞–¥—Å–∏–ª–∞—î—à –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥—Ä—É–≥—É</li>
                <li>2Ô∏è‚É£ –î—Ä—É–≥ –∑–∞–º–æ–≤–ª—è—î –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è</li>
                <li>3Ô∏è‚É£ –¢–∏ –æ—Ç—Ä–∏–º—É—î—à 30% –∑–Ω–∏–∂–∫–∏</li>
            </ul>
        </div>

    </main>

</div>

<script src="cabinet.js"></script>
<script>
    checkAuth();

    // ===== REFERRAL LOGIC =====
    const user = JSON.parse(localStorage.getItem("cleanpro_user"));

    const refLinkInput = document.getElementById("refLink");
    const refCount = document.getElementById("refCount");

    // –≥–µ–Ω–µ—Ä—É—î–º–æ —Ä–µ—Ñ-–∫–æ–¥
    if (!user.refCode) {
        user.refCode = "CP-" + Math.random().toString(36).substring(2, 8).toUpperCase();
        user.referrals = 0;
        localStorage.setItem("cleanpro_user", JSON.stringify(user));
    }

    refLinkInput.value = window.location.origin + "/?ref=" + user.refCode;
    refCount.textContent = user.referrals || 0;

    function copyRef() {
        refLinkInput.select();
        document.execCommand("copy");
        alert("–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ");
    }
</script>
</body>
</html>
